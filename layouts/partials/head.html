<head>
  <meta charset="utf-8" />
  <title>{{ .Title }}</title>

  <!--<meta http-equiv="refresh" content="0; url=/" />-->

  {{ "<!-- mobile responsive meta -->" | safeHTML }}
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  {{ with .Site.Params.author }}
  <meta name="author" content="{{ . }}">
  {{ end }}
  {{ hugo.Generator }}

  {{ "<!-- Bootstrap -->" | safeHTML }}

  {{ $bootstrap := resources.Get "css/bootstrap.css" | minify }}
  <link rel="stylesheet" href="{{ $bootstrap.Permalink }}" />

  {{ "<!-- font-awesome -->" | safeHTML }}

  <link rel="stylesheet" href="{{ "font-awesome/css/font-awesome.min.css" | absURL }}" />

  {{ "<!-- Main Stylesheets -->" | safeHTML }}

  {{ $style := resources.Get "scss/style.scss" | resources.ToCSS | minify }}
  <link href="{{ $style.Permalink }}" rel="stylesheet" />

  {{ range .Site.Params.custom_stylesheets -}}
    {{ $style := resources.Get . | resources.ExecuteAsTemplate "custom.css" . | toCSS | minify | fingerprint }}
    <link href="{{ $style.Permalink }}" rel="stylesheet" />
  {{- end }}

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  {{ with .Site.Params.substackDomain}}
  <script>
    window.CustomSubstackWidget = {
        substackUrl: "{{ . }}",
        placeholder: "example@gmail.com",
        buttonText: "Subscribe for Updates",
        theme: "purple",
    };
  </script>
  {{ end }}

  <!--Favicon-->
  <link rel="shortcut icon" href="{{ .Site.Params.favicon_shortcut_icon | absURL }}" type="image/x-icon" />
  <link rel="icon" href="{{ .Site.Params.favicon_icon | absURL }}" type="image/x-icon" />
  <script src="https://kit.fontawesome.com/bb1d08a9b2.js" crossorigin="anonymous"></script>

  {{ with .Site.Params }}
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id={{.gAnalyticsID}}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', '{{.gAnalyticsID}}');
    </script>
  {{ end }}

    <script>
      $(function() {

        $.get("https://btb-api.onrender.com/search", function( data ) {
            console.log(data)
          });

        function updateTable() {

          var docTemplate = "<a class='featured-document-wrapper' href='LINK' alt=''>\
            <div class='featured-document'>\
              <column style='width: 30%;'>\
                <img class='featured-document-thumbnail' src='THUMBNAIL'>\
              </column>\
              <column style='width: 70%; padding-left: 20px;' id='feature-doc-blurb-col'>\
                <h4>TITLE</h4>\
                <p>BLURB</p>\
              </column>\
            </div>\
          </a>"


          var query = $('#file-search').val()

          var request = "https://btb-api.onrender.com/search?q=" + query + "&format=json"
          console.log('sending request: ' + request)

          $.get(request, function( data ) {
            // $( ".search-results" ).html( data );

            $.each(data, function(key, value) {
              console.log(value)
            })
          });
        }

        $('.search-button').on('click', function() {
          updateTable()
        })
      })
    </script>


</head>
